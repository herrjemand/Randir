<html>
	<head>
		<title>Hello World!</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<style type="text/css">
			body{
				margin: 0;
				background: white;
			}
			#svgmap{
				width: 100%;
				height: 100%;
			}
			#mx path{
				fill:red;
			}
		</style>
	</head>
	<body>
		<button onclick="select_region('africa')">Africa</button>
		<button onclick="select_region('europe')">Europe</button>
		<button onclick="select_region('asia')">Asia</button>
		<button onclick="select_region('north america')">North America</button>
		<button onclick="select_region('schengen')">Schengen</button>
		<button onclick="select_region('eu')">EU</button>
		<button onclick="select_region('african union')">African Union</button>
		<button onclick="select_region('arab league')">Arab league</button>
		<button onclick="select_region('Middle East')">Middle East</button>
		<button onclick="select_region('clear')">RESET</button>
		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/jquery.panzoom.min.js"></script>
		<section id="focal">
			<div class="parent">
				<div class="panzoom">
					<object type="image/svg+xml" data="world.svg" id="svgmap"></object>
					<!-- <img src="world.svg" id="svgmap" type="image/svg+xml"> -->
				</div>
			</div>
		</section>
		<script type="text/javascript">
				var json_data 	= '',
					svgdom 		= '',
					rest = ["a", "pr", "ge", "xa", "xo", "fr", "frx", "gp", "mq", "re", "yt", "id", "it", "bd", "do", "nz", "cu", "pt", "de", "th", "pg", "hr", "gl", "mm", "sb", "gb", "ht", "in", "cnx", "hk", "mo", "az", "xn", "my", "ph", "ee", "es", "kh", "lk", "gr", "xp", "tf", "aq", "nc", "fj", "tl", "bs", "vu", "fk", "gs", "jm", "xc", "bn", "tt", "cv", "pf", "ws", "lu", "fo", "vi", "cw", "sx", "dm", "to", "ki", "fm", "ad", "mp", "pw", "sc", "ag", "bb", "tc", "vc", "lc", "gd", "mt", "mv", "ky", "kn", "ms", "bl", "nu", "pm", "ck", "wf", "as", "mh", "aw", "li", "vg", "sh", "je", "ai", "mf", "gg", "sm", "bm", "tv", "nr", "gi", "pn", "mc", "va", "im", "gu", "sg", "nf", "tk", "io", "CX", "CC", "HM", "nl", "nlx", "bq", "uz", "au", "me", "pe", "bf", "gf", "ly", "by", "pk", "ci", "dz", "ch", "cm", "mk", "bw", "ke", "jo", "ml", "cd", "xs", "af", "gh", "at", "ug", "co", "iq", "ne", "lv", "ro", "zm", "et", "gt", "sr", "eh", "cz", "td", "al", "sy", "kg", "cr", "py", "pl", "na", "za", "eg", "ba", "sv", "gy", "be", "ls", "bg", "bi", "dj", "uy", "cg", "rw", "am", "sn", "tg", "hu", "mw", "tj", "is", "ni", "ma", "lr", "cf", "sk", "lt", "zw", "il", "la", "kp", "tm", "bj", "si", "ua", "np", "mn", "bt", "sd", "ss"]


				$(window).load(function () {
					svgdom = $(document.getElementById('svgmap').contentDocument);
					
					$.getJSON( "data.json", function( data ) {
						json_data = data;
						$.each( data, function( key, val ) {
							colourup(val.country, "#e0e0e0");
						});
					});
					// $.each( rest, function( key, val ) {
					// 		colourup(val, "green");
					// });
				});
				var colourup = function(id,colour) {
						$("[id='" + id + "']", svgdom).attr("fill", colour);
				};
				var select_region = function(region){
							$.each( json_data, function( key, val ) {
								if(region.toLowerCase() != "clear"){
									if(val.geo_regions.indexOf(region.toLowerCase()) > -1){
										colourup(val.country,"blue");
									}else colourup(val.country,"#e0e0e0");
								}else colourup(val.country,"#e0e0e0");

							});
				}
				$.each( rest, function( key, val ) {
							colourup(val, "#800000");
				});

				// $( window ).resize(function() {
				// //$( "#svgmap" ).css("width", this.width()).css("height", this.height());
				// });

				// (function() {
				// 	var $section = $('#focal');
				// 	var $panzoom = $section.find('.panzoom').panzoom();
				// 	$panzoom.parent().on('mousewheel.focal', function( e ) {
				// 		e.preventDefault();
				// 		var delta = e.delta || e.originalEvent.wheelDelta;
				// 		var zoomOut = delta ? delta < 0 : e.originalEvent.deltaY > 0;
				// 		$panzoom.panzoom('zoom', zoomOut, {
				// 			increment: 	0.1,
				// 			animate: 	true,
				// 			minScale: 	1,
				// 			maxScale: 100,
				// 			focal: 		e,
				// 			onZoom: (function(){
				// 				$('#svgmap').css('display', 'none').height();

				// 			})
				// 		});
				// 	});
				// })();
		</script>
		<style></style>
	</body>
</html>